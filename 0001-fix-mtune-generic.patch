From d8a9661814f14fcbef91b3ea0cb6c35bd0862af9 Mon Sep 17 00:00:00 2001
From: Zheng Junjie <zhengjunjie@iscas.ac.cn>
Date: Mon, 4 Nov 2024 12:54:16 +0800
Subject: [PATCH] fix -mtune=generic.

---
 debian/patches/0001-no-mtune-generic.patch | 25 ++++++++++++++++++++++
 debian/patches/series                      |  1 +
 2 files changed, 26 insertions(+)
 create mode 100644 debian/patches/0001-no-mtune-generic.patch
 create mode 100644 debian/patches/series

diff --git a/debian/patches/0001-no-mtune-generic.patch b/debian/patches/0001-no-mtune-generic.patch
new file mode 100644
index 000000000..4724b2713
--- /dev/null
+++ b/debian/patches/0001-no-mtune-generic.patch
@@ -0,0 +1,25 @@
+From aa35f2b6638f6ea4f54f3624cf4ca1cd2a71adf4 Mon Sep 17 00:00:00 2001
+From: Zheng Junjie <zhengjunjie@iscas.ac.cn>
+Date: Mon, 4 Nov 2024 12:53:29 +0800
+Subject: [PATCH] no -mtune=generic
+
+---
+ CMakeLists.txt | 2 +-
+ 1 file changed, 1 insertion(+), 1 deletion(-)
+
+diff --git a/CMakeLists.txt b/CMakeLists.txt
+index 3ca6735e4..da372993c 100644
+--- a/CMakeLists.txt
++++ b/CMakeLists.txt
+@@ -65,7 +65,7 @@ if(COMPILER_SUPPORTS_FMA)
+ endif()
+ 
+ # If building one the same hardware to be deployed on, try `-march=native`!
+-add_compile_options(-O3 -finline-limit=10000000 -ffp-contract=fast -ffast-math -mtune=generic)
++add_compile_options(-O3 -finline-limit=10000000 -ffp-contract=fast -ffast-math)
+ 
+ add_library(mppi_controller SHARED
+   src/controller.cpp
+-- 
+2.46.0
+
diff --git a/debian/patches/series b/debian/patches/series
new file mode 100644
index 000000000..a6a7c8562
--- /dev/null
+++ b/debian/patches/series
@@ -0,0 +1 @@
+0001-no-mtune-generic.patch
-- 
2.48.1

